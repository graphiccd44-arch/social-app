<!DOCTYPE html>
<html lang="my">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Content Generator</title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <style>
        :root { --primary: #6366f1; --bg-body: #f3f4f6; --bg-card: #ffffff; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg-body); margin: 0; padding: 20px; }
        .container { max-width: 1000px; margin: 0 auto; display: grid; grid-template-columns: 320px 1fr; gap: 20px; }
        
        /* Card Styles */
        .card { background: var(--bg-card); padding: 25px; border-radius: 16px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); margin-bottom: 20px; border: 1px solid #e5e7eb; }
        h2 { margin-top: 0; font-size: 18px; color: #1f2937; display: flex; align-items: center; gap: 8px; margin-bottom: 20px;}
        
        /* Inputs */
        label { display:block; margin-bottom: 5px; font-weight: 600; font-size: 13px; color: #4b5563; }
        input, select, textarea { width: 100%; padding: 12px; margin-bottom: 15px; border: 1px solid #d1d5db; border-radius: 8px; box-sizing: border-box; font-family: inherit; font-size: 14px; transition: 0.2s; }
        input:focus, textarea:focus { outline: none; border-color: var(--primary); ring: 2px; }
        
        /* Buttons */
        .btn { width: 100%; padding: 12px; background: var(--primary); color: white; border: none; border-radius: 10px; cursor: pointer; font-weight: bold; transition: 0.2s; font-size: 14px; }
        .btn:hover { background: #4f46e5; transform: translateY(-1px); }
        .btn:disabled { background: #9ca3af; cursor: not-allowed; transform: none; }

        /* Output */
        .result-box { background: #f9fafb; border: 1px solid #e5e7eb; padding: 15px; border-radius: 10px; margin-top: 15px; min-height: 100px; white-space: pre-wrap; font-size: 14px; line-height: 1.6; color: #374151; }
        
        /* Feed Post */
        .post { background: white; padding: 20px; border-radius: 12px; margin-bottom: 15px; border: 1px solid #e5e7eb; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.05); }
        .post-header { display: flex; align-items: center; gap: 12px; margin-bottom: 12px; }
        .avatar { width: 40px; height: 40px; background: #e0e7ff; color: var(--primary); border-radius: 50%; display: flex; align-items: center; justify-content: center; font-weight: bold; font-size: 18px; }
        .timestamp { font-size: 12px; color: #6b7280; }

        @media (max-width: 768px) { .container { grid-template-columns: 1fr; } }
    </style>
</head>
<body>

    <div class="container">
        
        <div class="left-panel">
            <div class="card">
                <h2>‚ú® AI Content Generator</h2>
                
                <label>What to write about?</label>
                <input type="text" id="topic" placeholder="e.g. Eyewear promotion for students...">
                
                <label>Tone</label>
                <select id="tone">
                    <option value="Professional & Informative">üëî Professional</option>
                    <option value="Fun & Engaging">üòÇ Fun & Engaging</option>
                    <option value="Emotional Story">‚ù§Ô∏è Emotional Story</option>
                    <option value="Short & Salesy">üí∞ Hard Sell</option>
                </select>

                <button class="btn" id="genBtn" onclick="generateContent()">Generate Magic ü™Ñ</button>
                
                <div class="result-box" id="output">Generated content will appear here...</div>
                <button class="btn" style="background:#10b981; margin-top:10px; display:none;" id="useBtn" onclick="sendToFeed()">Use this Post</button>
            </div>
            
            </div>

        <div class="right-panel">
            <div class="card">
                <h2>üìù Create Post</h2>
                <textarea id="postInput" rows="4" placeholder="What's on your mind?"></textarea>
                <button class="btn" onclick="addPost()">Post to Feed</button>
            </div>

            <div id="feedStream">
                <div style="text-align:center; color:gray; padding:20px;">Loading Feed...</div>
            </div>
        </div>

    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.0/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, query, orderBy, serverTimestamp } 
        from "https://www.gstatic.com/firebasejs/9.22.0/firebase-firestore.js";

        // --- FIREBASE SETUP ---
        const firebaseConfig = {
            apiKey: "AIzaSyAFLolC6hEYro24FAFrKTGrXe4WXvISv3M", // Firebase Key (Do NOT change)
            authDomain: "myclassfeed-766f9.firebaseapp.com",
            projectId: "myclassfeed-766f9",
            storageBucket: "myclassfeed-766f9.firebasestorage.app",
            messagingSenderId: "428491793200",
            appId: "1:428491793200:web:dc8b769278b0e981d29ef5"
        };
        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        // --- üîê API KEY SETUP (PLEASE EDIT THIS PART) ---
        
        const PART_1 = "AIzaSy"; 
        
        // ‚ö†Ô∏è ·Äí·ÄÆ·Ä°·Ä±·Ä¨·ÄÄ·Ä∫·ÄÄ ·ÄÖ·Ä¨·Äû·Ä¨·Ä∏·Äî·Ä±·Äõ·Ä¨·Äô·Äæ·Ä¨ ·Äô·ÄÑ·Ä∫·Ä∏·Äõ·Ä≤·Ä∑ KEY ·Ä°·Äû·ÄÖ·Ä∫·Äõ·Ä≤·Ä∑ ·Äî·Ä±·Ä¨·ÄÄ·Ä∫·Ä°·Äï·Ä≠·ÄØ·ÄÑ·Ä∫·Ä∏·ÄÄ·Ä≠·ÄØ ·Äë·Ää·Ä∑·Ä∫·Äï·Ä±·Ä∏·Äï·Ä´
        // ·Ä•·Äï·Äô·Ä¨ - ·Äô·ÄÑ·Ä∫·Ä∏ Key ·ÄÄ "AIzaSy_ABC123" ·ÄÜ·Ä≠·ÄØ·Äõ·ÄÑ·Ä∫ "_ABC123" ·ÄÄ·Ä≠·ÄØ·Äï·Ä≤ ·Äë·Ää·Ä∑·Ä∫·Äï·Ä´
        
        const PART_2 = "D56raLSnvbUeAXzUvERGeF5u6QZwera_g"; 

        const FINAL_API_KEY = PART_1 + PART_2;

        // --- GENERATOR LOGIC ---
        window.generateContent = async function() {
            const topic = document.getElementById('topic').value;
            const tone = document.getElementById('tone').value;
            const btn = document.getElementById('genBtn');
            const output = document.getElementById('output');

            if(!topic) { alert("·ÄÅ·Ä±·Ä´·ÄÑ·Ä∫·Ä∏·ÄÖ·Äâ·Ä∫ ·Äê·ÄÖ·Ä∫·ÄÅ·ÄØ·ÄÅ·ÄØ ·Äõ·Ä±·Ä∏·Äï·Ä±·Ä∏·Äï·Ä´!"); return; }
            
            // Check if user forgot to replace the key
            if(PART_2.includes("·Äô·ÄÑ·Ä∫·Ä∏·Äõ·Ä≤·Ä∑_KEY") || PART_2.length < 10) {
                alert("Code ·Äë·Ä≤·Äô·Äæ·Ä¨ API Key ·Äë·Ää·Ä∑·Ä∫·Äñ·Ä≠·ÄØ·Ä∑ ·Äô·Ä±·Ä∑·ÄÄ·Äª·Äî·Ä∫·ÄÅ·Ä≤·Ä∑·Äï·Ä´·Äê·Äö·Ä∫! GitHub Code ·ÄÄ·Ä≠·ÄØ ·Äï·Äº·Äî·Ä∫·ÄÖ·ÄÖ·Ä∫·Äï·Ä´·Åã");
                return;
            }

            btn.disabled = true;
            btn.innerText = "Writing...";
            output.innerText = "AI is thinking...";

            const prompt = `Write a Facebook post in Burmese (Myanmar) about: "${topic}". Tone: ${tone}. Use emojis.`;

            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash:generateContent?key=${FINAL_API_KEY}`, {
                    method: "POST",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] })
                });

                if (!response.ok) throw new Error("API Error");

                const data = await response.json();
                const text = data.candidates[0].content.parts[0].text;
                
                output.innerText = text;
                document.getElementById('useBtn').style.display = 'block';

            } catch (e) {
                console.error(e);
                output.innerText = "Error! API Key ·Äô·Äæ·Ä¨·Ä∏·Äî·Ä±·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ (·Äû·Ä≠·ÄØ·Ä∑) ·Äï·Äª·ÄÄ·Ä∫·Äû·ÄΩ·Ä¨·Ä∏·ÄÅ·Äº·ÄÑ·Ä∫·Ä∏ ·Äñ·Äº·ÄÖ·Ä∫·Äî·Ä≠·ÄØ·ÄÑ·Ä∫·Äï·Ä´·Äû·Ää·Ä∫·Åã";
            }
            btn.disabled = false;
            btn.innerText = "Generate Magic ü™Ñ";
        }

        window.sendToFeed = function() {
            document.getElementById('postInput').value = document.getElementById('output').innerText;
        }

        // --- FEED LOGIC ---
        window.addPost = async function() {
            const txt = document.getElementById('postInput').value;
            if(!txt) return;
            await addDoc(collection(db, "posts"), {
                content: txt,
                username: "User",
                timestamp: serverTimestamp()
            });
            document.getElementById('postInput').value = "";
        }

        const q = query(collection(db, "posts"), orderBy("timestamp", "desc"));
        onSnapshot(q, (snapshot) => {
            const feedDiv = document.getElementById('feedStream');
            feedDiv.innerHTML = "";
            snapshot.forEach(doc => {
                const data = doc.data();
                feedDiv.innerHTML += `
                <div class="post">
                    <div class="post-header">
                        <div class="avatar">U</div>
                        <div>
                            <div style="font-weight:bold;">User</div>
                            <div class="timestamp">Just now</div>
                        </div>
                    </div>
                    <div style="white-space: pre-wrap;">${data.content}</div>
                </div>`;
            });
        });
    </script>
</body>
</html>
